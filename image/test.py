import pandas as pd

from dataen import Route, PreProcessor, SarimaxModel, Api
api = Api()
api.get_realtime('2024-11-01')
preProcessor = PreProcessor()
#preProcessor.check_lateday()
sarimax = SarimaxModel()
# # actual = [101.81, 76.9, 77.3, 78.08, 99.38, 87.14, 100.42, 109.13, 139.31, 117.02, 116.97, 109.93, 100.4, 100.58, 110.68, 109.06, 116.86, 117.02, 117.12, 116.32, 117.33, 100.89, 116.03, 111.96]
# rst = [103.72639157391217, 100.28131733506069, 89.52522080635298, 74.68381317041758, 78.59937749665676, 90.28015388040606, 114.43823525973818, 117.88323729897354, 131.16213680486433, 129.620398993947, 112.26856719477485, 105.77935325223483, 98.05987821082945, 107.88778570688292, 120.87407960003372, 128.8255265019535, 128.96027754174847, 137.16764760618346, 141.08778210314955, 142.5175576825981, 139.20577271247546, 125.44871384409421, 131.42089008394416, 124.86044788655168]
sss = [106.209618976626, 98.91763071060134, 92.03428718813436, 74.48927868156781, 78.45099813507287, 89.9119783401809, 114.55922011805444, 115.21465860881138, 130.00457648531525, 128.82175460842686, 112.77519952724529, 107.501881673447, 100.71707471952965, 109.07753939708086, 120.9167839503672, 128.19092843768567, 128.54638564571326, 136.21953342848641, 138.71125635471716, 139.53691264496845, 136.36467949534793, 122.08587471239711, 127.16408569786218, 120.78345773556687]

#k = api.get_weather('2024-10-23')['actual_weather_1']
# df = pd.DataFrame(k)
# print(df)
rrr = [112.58, 103.44, 102.83, 91.75, 101.85, 103.45, 106.6, 131.3, 151.13, 150.53, 145.71, 135.22, 116.31, 113.82, 114.22, 113.0, 131.17, 131.26, 131.26, 107.08, 103.42, 103.42, 103.42, 103.42]

#model = sarimax.train()
#print(sarimax.forecast(model='C:\dataen\model\d.pkl' , actual=rrr))
#api.post_dayahead(sarimax.forecast(r'C:\dataen\model\d.pkl'))
# #-0.02287331612716185
# #-0.022090147629917276
# #-0.025 계절성 48추가
# #0.003962700898013052
t = [97.08070652260326, 95.17912573980033, 95.86956826110574, 82.81672733726836, 88.00632217947032, 98.34280890067159, 116.89901101826945, 122.35394453071133, 128.67959919030187, 134.54147992569338, 115.94013640053078, 114.15669483069895, 110.97776938637311, 110.69793027132081, 122.35054736686251, 122.20542491643057, 126.64949371628393, 135.82834827571844, 140.89499876195435, 142.44037980426126, 136.49314269107228, 126.06763289060076, 129.8608625457332, 121.55800852156133, 117.51308039238303, 104.54413840947599, 93.43896654002985, 89.8120534199238, 91.87693114210951, 95.32545798706111, 112.74527939145688, 119.91394917654402, 136.33041714708096, 128.1810526447366, 116.39421128059206, 116.2559769464209, 113.39777382940457, 117.71024962694096, 119.03184049182609, 133.90232222832313, 129.44169056223797, 129.85501706674847, 131.79642780189224, 127.94493597363817, 126.66801334763876, 116.72943738374113, 122.02246176173816, 116.35286652883727]

s = t[:24]
print(s)
print(len(s))

ppp = [117.51308039238303, 104.54413840947599, 93.43896654002985, 89.8120534199238, 91.87693114210951, 95.32545798706111, 112.74527939145688, 119.91394917654402, 136.33041714708096, 128.1810526447366, 116.39421128059206, 116.2559769464209, 113.39777382940457, 117.71024962694096, 119.03184049182609, 133.90232222832313, 129.44169056223797, 129.85501706674847, 131.79642780189224, 127.94493597363817, 126.66801334763876, 116.72943738374113, 122.02246176173816, 116.35286652883727]
#api.post_dayahead(s)
